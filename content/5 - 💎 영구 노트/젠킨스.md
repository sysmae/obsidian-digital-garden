---
{"publish":true,"created":"2025-07-25T01:02:41.825+09:00","modified":"2025-08-01T00:19:45.516+09:00","cssclasses":""}
---

#2025-07-25 01:02

Status: 

Tags:  [[3 - ğŸ·ï¸ íƒœê·¸/ë°ë¸Œì˜µìŠ¤]]
# ì  í‚¨ìŠ¤
ìë°” ëŸ°íƒ€ì„ì—ì„œ ëŒì•„ê°€ëŠ” ì˜¤í”ˆì†ŒìŠ¤ CI CD ë„êµ¬
í”ŒëŸ¬ê·¸ì¸ê³¼ íŒŒì´í”„ë¼ì¸ ì¡°í•©
### ì™œ ë§Œë“¤ì–´ì¡ŒëŠ”ê°€? -> ì–´ë–¤ ë¬¸ì œ í•´ê²°
ì½”ë“œ ì»¤ë°‹í• ë•Œë§ˆë‹¤ ë¹Œë“œ ì‹¤íŒ¨í•˜ëŠ” ìƒí™©ê³¼ íŒ€ì›ë“¤ì˜ ë¶„ë…¸ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§
-> ìˆ˜ë™ ë¹Œë“œì™€ í…ŒìŠ¤íŠ¸ë¥¼ ìë™í™”, ì§€ì†ì ìœ¼ë¡œ í†µí•©í•´ì„œ ì˜¤ë¥˜ ì¤„ì´ê³ , ë°°í¬ë¥¼ ì‰½ê²Œ
### ì—¬ëŸ¬ ë°°í¬ í™˜ê²½ ê´€ë¦¬ í•µì‹¬: ì¸í”„ë¼ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ì–´ë–¤ê²ƒì´ ë³€ìˆ˜ì¸ì§€ ì˜ ì„¤ì •í•˜ê³  ì´ë¥¼ ì˜ ì„¤ê³„í•˜ëŠ” ê²ƒ

### ì  í‚¨ìŠ¤ ì•„í‚¤í…ì³
ë§ˆìŠ¤í„° ì—ì´ì „íŠ¸ ë˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë…¸ë“œ ì•„í‚¤í…ì³ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•¨

### ì»¨íŠ¸ë¡¤ëŸ¬(ë§ˆìŠ¤í„°)
ì „ì²´ ì‹œìŠ¤í…œ ë‘ë‡Œ ì—­í• 
- ì‘ì—… ìŠ¤ì¼€ì¥´ë§
- ì—ì´ì „íŠ¸ ëª¨ë‹ˆí„°ë§
- ì›¹ ì¸í„°í˜ì´ìŠ¤
- í”ŒëŸ¬ê·¸ì¸
- êµ¬ì„± ì •ë³´ ì €ì¥

### ì—ì´ì „íŠ¸(ë…¸ì˜ˆ)
ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ì›Œì»¤ ë…¸ë“œ
- ì‘ì—… ì‹¤í–‰
- í™˜ê²½ ê²©ë¦¬
- í™•ì¥ì„± ì œê³µ

### ì  í‚¨ìŠ¤ ì‹¤ì œ êµ¬ì¡°
```
JENKINS_HOME/
â”œâ”€â”€ config.xml (Jenkins ë£¨íŠ¸ êµ¬ì„±)
â”œâ”€â”€ jobs/
â”‚   â””â”€â”€ [JOB_NAME]/
â”‚       â”œâ”€â”€ config.xml (ì‘ì—… êµ¬ì„± íŒŒì¼)
â”‚       â””â”€â”€ builds/
â”‚           â””â”€â”€ [BUILD_ID]/
â”‚               â”œâ”€â”€ build.xml
â”‚               â””â”€â”€ log
â”œâ”€â”€ workspace/ (ì‘ì—… ê³µê°„)
â”œâ”€â”€ plugins/ (í”ŒëŸ¬ê·¸ì¸ ì €ì¥ì†Œ)
â””â”€â”€ secrets/ (ë³´ì•ˆ ì •ë³´)
```

### ì  í‚¨ìŠ¤ ì„¤ì¹˜ (ë„ì»¤ ì¸ ë„ì»¤)
 **ì  í‚¨ìŠ¤ ì´ë¯¸ì§€ ë°›ê¸°** 
```shell
docker pull jenkins/jenkins:lts
```
**ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
```shell
   docker run -d --name jenkins -p 8080:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home -v //var/run/docker.sock:/var/run/docker.sock -u root jenkins/jenkins:lts
```
**ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ì ‘ì†**
```shell
docker exec -it jenkins /bin/bash
```
**ê¶Œí•œ ë¶€ì—¬**
```shell
chmod 666 /var/run/docker.sock
```
ì  í‚¨ìŠ¤ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ë„ì»¤ ì„¤ì¹˜
```shell
# ê¸°ì¡´ Docker ê´€ë ¨ íŒ¨í‚¤ì§€ ì œê±°
apt-get remove docker docker-engine docker.io containerd runc

# í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
apt-get update
apt-get install ca-certificates curl gnupg lsb-release

# Docker GPG í‚¤ ì¶”ê°€
mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# Docker ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

# Docker CLIë§Œ ì„¤ì¹˜
apt-get update
apt-get install docker-ce-cli
```
**ë‚´ë¶€ì—ì„œ ë„ì»¤ í…ŒìŠ¤íŠ¸**
```shell
docker --version
```
**ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ í™•ì¸**
```shell
   docker exec -it jenkins cat /var/jenkins_home/secrets/initialAdminPassword
```
**ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†** [http://localhost:8080](http://localhost:8080/) ìœ¼ë¡œ ì ‘ì†í•´ì„œ, ìœ„ì—ì„œ í™•ì¸í•œ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•˜ë©´ ì  í‚¨ìŠ¤ ì„¤ì •ì„ ì‹œì‘. í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ í™”ë©´ìœ¼ë¡œ ê°€ì„œ ì¶”ì²œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ ê°€ëŠ¥
ì•„ì´ë””ëŠ” ê¸°ë³¸ admin ì´ê³  ì´í›„ ì„¤ì •ì—ì„œ ë¹„ë²ˆ ì„¤ì • ê°€ëŠ¥

### ì  í‚¨ìŠ¤ ì‚¬ìš©ë²•
### íŒŒì´í”„ë¼ì¸ ê¸°ë³¸ êµ¬ì¡°
CI CD íŒŒì´í”„ë¼ì¸ì„ ì  í‚¨ìŠ¤ì— êµ¬í˜„í•˜ê¸° ìœ„í•œ ì¼ë ¨ì˜ í”ŒëŸ¬ê·¸ì¸ë“¤ì˜ ì§‘í•©ì´ì êµ¬ì„±
í”ŒëŸ¬ê·¸ì¸ë“¤ì´ íŒŒì´í”„ë¼ì¸ì—ì„œ ìš©ë„ì— ë§ê²Œ ì‚¬ìš©ë˜ê³  ì •ì˜
- **íŒŒì´í”„ë¼ì¸**: ì¼ë ¨ì˜ ì‘ì—… ëª…ì„¸ì„œ (ë ˆì‹œí”¼)ë¡œ, ì–´ë–¤ ìˆœì„œë¡œ ì‘ì—…ì´ ìˆ˜í–‰ë˜ëŠ”ì§€ ì •ì˜
#### Declarative Pipelineì˜ ê¸°ë³¸ í‹€
ëª¨ë“  ìœ ìš”í•œ declarative pipelineì€ `pipeline` ë¸”ë¡ ë‚´ì— ì •ì˜ë˜ì–´ì•¼ í•œë‹¤.
```groovy
pipeline {{
		stage('Build'){
			steps {
				echo 'Building...'
			}
		}
	}
}
```
#### í•„ìˆ˜ êµ¬ì„± ìš”ì†Œ
- agent: íŒŒì´í”„ë¼ì¸ì´ ì‹¤í–‰ë  ìœ„ì¹˜ ì§€ì •
- stages: í•˜ë‚˜ ì´ìƒì˜ stage ë¸”ë¡ í¬í•¨
- stage: ê°œë³„ ì‘ì—… ë‹¨ìœ„ ì •ì˜
- steps: stage ë‚´ì—ì„œ ì‹¤í–‰ë  êµ¬ì²´ì  ëª…ë ¹ì–´ë“¤
### Declarative Pipeline ë¬¸ë²•  DSL
#### Pipeline ë¸”ë¡ êµ¬ì¡°

```groovy
pipeline {
    /* Declarative Pipeline ë‚´ìš© */
}
```

ê¸°ë³¸ ê·œì¹™:
- ìµœìƒìœ„ ë ˆë²¨ì€ ë°˜ë“œì‹œ `pipeline { }` ë¸”ë¡ì´ì–´ì•¼ í•¨
- ì„¸ë¯¸ì½œë¡  ì—†ìŒ (ê° ë¬¸ì¥ì€ ë³„ë„ ì¤„ì— ì‘ì„±)
- ë¸”ë¡ì€ Sections, Directives, Steps, ë˜ëŠ” í• ë‹¹ë¬¸ìœ¼ë¡œë§Œ êµ¬ì„±

#### Agent ì§€ì‹œë¬¸
agent ëŠ” íŒŒì´í”„ë¼ì¸ì´ ì‹¤í–‰ë  ìœ„ì¹˜ ì§€ì •
```groovy
pipeline {
	agent any // ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  agent
	agent none // ê¸€ë¡œë²Œ agent ì—†ìŒ, ê° stage ì—ì„œ ì •ì˜
	agent {
		label 'linux-machine' // íŠ¹ì • ë¼ë²¨ì˜ agent
	}
	agent {
		docker {
			image 'node:18' // ë„ì»¤ ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰	
		}
	}
}
```

#### Stagesì™€ Steps
```groovy
pipeline {
	agent any
	stages {
		stage('Checkout') {
			steps {
				git 'https://github.com/username/repository.git'
			}
		}
		stage('Build') {
			steps {
				sh 'npm install'
				sh 'npm run build'
			}
		}
		stage('Test') {
			steps {
				sh 'npm test'
			}
		}
	}
}
```

#### ìë°” í«í´ë¦¬ë‹‰ ì˜ˆì‹œ ìŠ¤í¬ë¦½íŠ¸
(ì‹¤ì œë¡œëŠ” pipeline ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ë¶€ë¶„ë§Œ ë„£ì–´ì•¼í•¨)
ë” ìì„¸í•œ ì½”ë“œë“¤ì€ ì•„ë˜ ë…¸íŠ¸ë¡œ
[[2 - âœï¸ ë¬¸í—Œ ë…¸íŠ¸/ë°ì¼ë¦¬ë…¸íŠ¸/2025-07-26#ì  í‚¨ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ ëª¨ìŒ]]
 [[1 - ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/Jenkins ì‚¬ìš©ë²•ê³¼ ì‹¤ì œ ë¬¸ë²• í•¸ë“œë¶]]

```groovy
# Jenkinsë¥¼ ì´ìš©í•œ ìë™ë¹Œë“œ
# item name: petclinic

#ì„¤ëª… : 1. GIT: petclinic build

# Pipeline : pipeline script
# Jenkins ì„¤ì¹˜ì‹œ ì¶”ì²œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜í•˜ë©´ git ê´€ë ¨ëœ í”ŒëŸ¬ê·¸ì¸ì´ í¬í•¨ë˜ì–´ ìˆìŒ
# Checkout ìŠ¤í…Œì´ì§€ì—ì„œ git source ë‹¤ìš´ë¡œë“œ
# Build ìŠ¤í…Œì´ì§€ì—ì„œ sh í”ŒëŸ¬ê·¸ì¸ì„ í†µí•´ mvnw  ì‹¤í–‰
# Build ì‘ì—… ì™„ë£Œí›„ ìƒì„±ëœ jar íŒŒì¼ì„ ì•„ì¹´ì´ë¸Œì•„í‚¤í™íŠ¸ë¡œ ì „ë‹¬

pipeline {
    agent any
        stages {
            
            stage('Checkout') {
                steps {
                    git branch: 'main', url:'https://github.com/237summit/petclinic.git'
                }
            }
            
            stage('Build') {
                steps {
                    sh "./mvnw  clean package"
                }
            
            post {
                success {
                    archiveArtifacts 'target/*.jar'
                }
            }
        }
    }
}

# ë¹Œë“œ ì§„í–‰ :  [ì§€ê¸ˆ ë¹Œë“œ]
# ì½˜ì†” ë¡œê·¸ ë³´ê¸°
# POST : ì•„ì¹´ì´ë¸Œì•„í‹°íŒ©íŠ¸ ë§í¬ í™•ì¸
```


 

## References
 [[5 - ğŸ’ ì˜êµ¬ ë…¸íŠ¸/CI CD]]
 [[1 - ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/Jenkins í•¸ë“œë¶_ ì´ˆë³´ìë¶€í„° ì¤‘ê¸‰ìê¹Œì§€]]
 [[1 - ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/Jenkins ì‚¬ìš©ë²•ê³¼ ì‹¤ì œ ë¬¸ë²• í•¸ë“œë¶]]
 [[2 - âœï¸ ë¬¸í—Œ ë…¸íŠ¸/ë°ì¼ë¦¬ë…¸íŠ¸/2025-07-26]]