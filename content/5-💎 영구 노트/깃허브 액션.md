---
publish:  true
---
#2025-07-25 00:47

Status: 

Tags:[[3-ğŸ·ï¸ íƒœê·¸/ë°ë¸Œì˜µìŠ¤]]

# ê¹ƒí—ˆë¸Œ ì•¡ì…˜
ê¸°ì¡´ ë¬¸ì œì 
- ìˆ˜ë™ ë°°í¬ ë²ˆê±°ë¡œì›€
- ë°˜ë³µì  í…ŒìŠ¤íŠ¸ ì‘ì—…
- ê¸°ì¡´ CI/CD ë„êµ¬ ë³µì¡í•¨ê³¼ ì§„ì… ì¥ë²½ -> ë°ë¸Œì˜µìŠ¤ ì—”ì§€ë‹ˆì–´ ë°˜í•„ìˆ˜
ì†”ì§íˆ ê¹ƒí—ˆë¸Œ ì“°ë©´ ê·¸ëƒ¥ ê¹ƒí—ˆë¸Œ ì•¡ì…˜ ì“°ëŠ”ê²Œ í›¨ì”¬ ì‰½ê³  ì •ì‹ ê±´ê°•ì— ì¢‹ë‹¤.
## í•µì‹¬ êµ¬ì¡°
ì´ë²¤íŠ¸ -> ì›Œí¬ í”Œë¡œìš° ->  ì‘ì—… ->  ì•¡ì…˜ -> ëŸ¬ë„ˆ

**Workflow (ì›Œí¬í”Œë¡œìš°)** â†’ **Job (ì‘ì—…)** â†’ **Step (ë‹¨ê³„)** â†’ **Action (ì•¡ì…˜)**
### 0. íŠ¹ì • ì´ë²¤íŠ¸ ë°œìƒ
[[1-ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/GitHub Actions ì™„ì „ í•¸ë“œë¶_ ì´ˆë³´ìë¶€í„° ì¤‘ê¸‰ìê¹Œì§€#ì´ë²¤íŠ¸ì™€ íŠ¸ë¦¬ê±°]]
ë°œìƒí•œ ì´ë²¤íŠ¸ê°€ ì›Œí¬í”Œë¡œìš° 
- push
- pull_request
- schedule
- workflow_dispatch

### 1. Workflow (ì›Œí¬í”Œë¡œìš°)
ìë™í™”ëœ í”„ë¡œì„¸ìŠ¤ì˜ ì •ì˜, ê°€ì¥ ìƒìœ„ ê°œë…
- `.github/workflows` ë””ë ‰í† ë¦¬ì— yaml íŒŒì¼ë¡œ ì €ì¥
- íŠ¹ì • ì´ë²¤íŠ¸ì— ì˜í•´ íŠ¸ë¦¬ê±°
- í•˜ë‚˜ì˜ ì €ì¥ì†Œì— ì—¬ëŸ¬ ì›Œí¬í”Œë¡œìš° ê°€ëŠ¥
- ê°ê° ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰(ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ ë“±)
```yaml
name: ì›Œí¬í”Œë¡œìš° ì´ë¦„
on: [ì´ë²¤íŠ¸]
jobs:
  ì‘ì—…ëª…:
    runs-on: ì‹¤í–‰í™˜ê²½
    steps:
      - ë‹¨ê³„ë“¤...
```
### 2. Job (ì‘ì—…)
ë™ì¼í•œ ëŸ¬ë„ˆì—ì„œ ì‹¤í–‰ë˜ëŠ” ë‹¨ê³„ë“¤ì˜ ì§‘í•©
- ë³‘ë ¬ ì‹¤í–‰
- `needs` í‚¤ì›Œë“œ ì“°ë©´ ìˆœì°¨ ì‹¤í–‰ ê°€ëŠ¥
- ê°ê° ë…ë¦½ëœ ê°€ìƒë¨¸ì‹ ì—ì„œ ì‹¤í–‰
- `runs-on` ìœ¼ë¡œ ì‹¤í–‰ í™˜ê²½ ì§€ì •
### 3. Step (ë‹¨ê³„)
ì‘ì—… ë‚´ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê°œë³„ ëª…ë ¹
- `run` : ì…€ ëª…ë ¹ì–´ ì‹¤í–‰
-  `uses`: ì•¡ì…˜ ì‚¬ìš©
### 4. Action(ì•¡ì…˜)
ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì½”ë“œ ë‹¨ìœ„, ë³µì¡í•œ ì‘ì—… ìº¡ìŠí™”
ì§ì ‘ ë§Œë“¤ê¸°ë„ í•˜ê³  ì´ë¯¸ ë§Œë“¤ì–´ì§„ê±¸ ê°€ì ¸ë‹¤ê°€ ì“¸ìˆ˜ë„ ìˆìŒ
ê¹ƒí—ˆë¸Œ ë§ˆì¼“ í”Œë ˆì´ìŠ¤ì—” 2ë§Œê°œ ì´ìƒì˜ ì•¡ì…˜ ë“±ë¡ë˜ì–´ ìˆìŒ
[[1-ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/GitHub Actions ì™„ì „ í•¸ë“œë¶_ ì´ˆë³´ìë¶€í„° ì¤‘ê¸‰ìê¹Œì§€#ê¸°ë³¸ CI/CD íŒŒì´í”„ë¼ì¸]]
```
    steps:
    - name: ì²´í¬ì•„ì›ƒ
      uses: actions/checkout@v4
      
    - name: Node.js ì„¤ì •  
      uses: actions/setup-node@v4
```
### 5. ëŸ¬ë„ˆ í™˜ê²½
ê¹ƒí—ˆë¸Œì—ì„œ ì œê³µí•˜ëŠ” ê°€ìƒ ë¨¸ì‹ ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ ìë™ìœ¼ë¡œ ì²˜ë¦¬
ê° ì‘ì—…ë§ˆë‹¤ ê°€ìƒë¨¸ì‹  ì œê³µí•˜ê³ , ë³´í†µì€ ìš°ë¶„íˆ¬ë¡œ ì“´ë‹¤.
ì›” 2000ë¶„ ë¬´ë£Œ, í¼ë¸”ë¦­ì€ ë¬´ì œí•œ
ì›í•˜ë©´ ì§ì ‘ self-hosted ëŸ¬ë„ˆìŠ¤ ìƒì„±í•´ì„œ ë§Œë“¤ìˆ˜ë„ ìˆìŒ

|ê°œë…|ì„¤ëª…|
|---|---|
|ì´ë²¤íŠ¸|íŠ¹ì • ìƒí™© ë°œìƒ ì‹œ íŠ¸ë¦¬ê±°, ì˜ˆ: í‘¸ì‹œ, PR|
|ì›Œí¬í”Œë¡œìš°|ì´ë²¤íŠ¸ì— ë”°ë¥¸ ì‘ì—… ì§‘í•© ì •ì˜|
|ì¡(Job)|ë³‘ë ¬ ë˜ëŠ” ìˆœì°¨ì  í•œ ì‘ì—… ë‹¨ìœ„|
|ìŠ¤í…(Step)|í•˜ë‚˜ì˜ ëª…ë ¹ ë˜ëŠ” ì•¡ì…˜ ìˆ˜í–‰|
|ì•¡ì…˜(Action)|ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìë™í™” ëª¨ë“ˆ|
|ëŸ¬ë„ˆ(Runner)|ì‘ì—… ì‹¤í–‰ í™˜ê²½ (VM/ì»¨í…Œì´ë„ˆ)|
### yaml í†µí•© ì˜ˆì‹œ ì½”ë“œ
```yaml
# ==============================================================================
# GitHub Actions ì™„ì „ ë¬¸ë²• ì°¸ì¡° ìŠ¤í¬ë¦½íŠ¸ (Next.js í”„ë¡œì íŠ¸ìš©)
# ëª¨ë“  ì£¼ìš” ë¬¸ë²•ê³¼ ê³ ê¸‰ ê¸°ëŠ¥ì„ í¬í•¨í•œ í•™ìŠµìš© ì¢…í•© ì˜ˆì œ
# ==============================================================================

# ------------------------------------------------------------------------------
# 1. ì›Œí¬í”Œë¡œìš° ë©”íƒ€ë°ì´í„° (Workflow Metadata)
# ------------------------------------------------------------------------------

# ì›Œí¬í”Œë¡œìš° ì´ë¦„ - Actions íƒ­ì—ì„œ í‘œì‹œë˜ëŠ” ì´ë¦„
# ìƒëµí•˜ë©´ íŒŒì¼ ê²½ë¡œê°€ í‘œì‹œë¨
name: "Complete GitHub Actions Syntax Reference (Next.js)"

# ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ì‹œ í‘œì‹œë˜ëŠ” ë™ì  ì´ë¦„
# í‘œí˜„ì‹ê³¼ ì»¨í…ìŠ¤íŠ¸ -name: "${{ github.actor }}ì´(ê°€) ${{ github.ref_name }} ë¸Œëœì¹˜ì—ì„œ ë°°í¬ ì‹¤í–‰ ğŸš€"

# ------------------------------------------------------------------------------
# 2. ì´ë²¤íŠ¸ íŠ¸ë¦¬ê±° (Event Triggers)
# ------------------------------------------------------------------------------

# ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ì´ë²¤íŠ¸ë“¤ ì •ì˜
on:
  # 2.1 Push ì´ë²¤íŠ¸ - ì½”ë“œê°€ í‘¸ì‹œë  ë•Œ ì‹¤í–‰
  push:
    # íŠ¹ì • ë¸Œëœì¹˜ì—ì„œë§Œ ì‹¤í–‰
    branches: 
      - main
      - develop
      - "release/*"  # ì™€ì¼ë“œì¹´ë“œ íŒ¨í„´ ì‚¬ìš© ê°€ëŠ¥
    # íŠ¹ì • ë¸Œëœì¹˜ ì œì™¸
    branches-ignore:
      - "feature/*"
    # íŠ¹ì • íŒŒì¼ ê²½ë¡œì—ì„œë§Œ ì‹¤í–‰
    paths:
      - "src/**"
      - "pages/**"
      - "components/**"
      - "package.json"
      - "package-lock.json"
    # íŠ¹ì • íŒŒì¼ ê²½ë¡œ ì œì™¸
    paths-ignore:
      - "docs/**"
      - "README.md"
      - "*.md"
    # íŠ¹ì • íƒœê·¸ì—ì„œ ì‹¤í–‰
    tags:
      - "v*.*.*"

  # 2.2 Pull Request ì´ë²¤íŠ¸
  pull_request:
    # PR ì´ë²¤íŠ¸ íƒ€ì… ì§€ì •
    types: 
      - opened      # PR ìƒì„±
      - synchronize # PR ì—…ë°ì´íŠ¸
      - reopened    # PR ì¬ì˜¤í”ˆ
      - closed      # PR ë‹«í˜
    branches: [main]

  # 2.3 ìŠ¤ì¼€ì¤„ ì´ë²¤íŠ¸ - cron í‘œí˜„ì‹ ì‚¬ìš©
  schedule:
    # ë§¤ì¼ ì˜¤ì „ 2ì‹œ (UTC) ì‹¤í–‰
    - cron: '0 2 * * *'
    # ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „ 9ì‹œ ì‹¤í–‰
    - cron: '0 9 * * MON'

  # 2.4 ìˆ˜ë™ íŠ¸ë¦¬ê±° - Actions íƒ­ì—ì„œ ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
  workflow_dispatch:
    # ì…ë ¥ ë§¤ê°œë³€ìˆ˜ ì •ì˜
    inputs:
      environment:
        description: 'ë°°í¬ í™˜ê²½ ì„ íƒ'
        required: true
        type: choice
        options: 
          - development
          - staging  
          - production
        default: 'staging'
      
      skip_tests:
        description: 'í…ŒìŠ¤íŠ¸ ê±´ë„ˆë›¸ì§€ ì—¬ë¶€'
        required: false
        type: boolean
        default: false
      
      custom_message:
        description: 'ì‚¬ìš©ì ì •ì˜ ë©”ì‹œì§€'
        required: false
        type: string
        default: 'Manual deployment'

  # 2.5 ë‹¤ë¥¸ ì›Œí¬í”Œë¡œìš°ì—ì„œ í˜¸ì¶œ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
  workflow_call:
    inputs:
      node_version:
        description: 'Node.js ë²„ì „'
        required: false
        type: string
        default: '20'
    secrets:
      NPM_TOKEN:
        description: 'NPM ë ˆì§€ìŠ¤íŠ¸ë¦¬ í† í°'
        required: true
    outputs:
      build_version:
        description: 'ë¹Œë“œëœ ë²„ì „'
        value: ${{ jobs.build.outputs.version }}

# ------------------------------------------------------------------------------
# 3. ì „ì—­ í™˜ê²½ ë³€ìˆ˜ (Global Environment Variables)
# ------------------------------------------------------------------------------

# ëª¨ë“  ì‘ì—…ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í™˜ê²½ ë³€ìˆ˜
env:
  # ì •ì  í™˜ê²½ ë³€ìˆ˜
  NODE_ENV: production
  NEXT_TELEMETRY_DISABLED: 1
  CI: true
  
  # í‘œí˜„ì‹ì„ ì‚¬ìš©í•œ ë™ì  í™˜ê²½ ë³€ìˆ˜
  BRANCH_NAME: ${{ github.ref_name }}
  COMMIT_SHA: ${{ github.sha }}
  BUILD_TIME: ${{ github.run_number }}
  
  # ì¡°ê±´ë¶€ í™˜ê²½ ë³€ìˆ˜ (ì‚¼í•­ ì—°ì‚°ì ì‚¬ìš©)
  DEPLOY_URL: ${{ github.ref == 'refs/heads/main' && 'https://prod.example.com' || 'https://staging.example.com' }}

# ------------------------------------------------------------------------------
# 4. ê¶Œí•œ ì„¤ì • (Permissions)
# ------------------------------------------------------------------------------

# GITHUB_TOKENì˜ ê¶Œí•œ ì„¤ì •
permissions:
  contents: read          # ì €ì¥ì†Œ ë‚´ìš© ì½ê¸°
  pages: write           # GitHub Pages ì“°ê¸°
  id-token: write        # OIDC í† í° ì“°ê¸°
  actions: read          # Actions ì½ê¸°
  checks: write          # ì²´í¬ ì“°ê¸°
  deployments: write     # ë°°í¬ ì“°ê¸°
  issues: write          # ì´ìŠˆ ì“°ê¸°
  pull-requests: write   # PR ì“°ê¸°
  security-events: write # ë³´ì•ˆ ì´ë²¤íŠ¸ ì“°ê¸°

# ------------------------------------------------------------------------------
# 5. ë™ì‹œì„± ì œì–´ (Concurrency)
# ------------------------------------------------------------------------------

# ë™ì‹œ ì‹¤í–‰ ì œì–´ - ê°™ì€ ê·¸ë£¹ì˜ ì›Œí¬í”Œë¡œìš°ëŠ” í•˜ë‚˜ì”©ë§Œ ì‹¤í–‰
concurrency:
  # ë™ì‹œì„± ê·¸ë£¹ ì´ë¦„ (ë¸Œëœì¹˜ë³„ë¡œ êµ¬ë¶„)
  group: ${{ github.workflow }}-${{ github.ref }}
  # ì§„í–‰ ì¤‘ì¸ ì‘ì—…ì„ ì·¨ì†Œí• ì§€ ì—¬ë¶€
  cancel-in-progress: true

# ------------------------------------------------------------------------------
# 6. ê¸°ë³¸ê°’ ì„¤ì • (Defaults)
# ------------------------------------------------------------------------------

# ëª¨ë“  ì‘ì—…ì˜ ê¸°ë³¸ ì„¤ì •
defaults:
  run:
    # ê¸°ë³¸ ì…¸ ì„¤ì •
    shell: bash
    # ê¸°ë³¸ ì‘ì—… ë””ë ‰í† ë¦¬
    working-directory: ./

# ------------------------------------------------------------------------------
# 7. ì‘ì—… ì •ì˜ (Jobs)
# ------------------------------------------------------------------------------

jobs:
  # ===========================================================================
  # 7.1 ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ì‘ì—…
  # ===========================================================================
  
  code-quality:
    # ì‘ì—… ì´ë¦„ (ì„ íƒì‚¬í•­)
    name: "ì½”ë“œ í’ˆì§ˆ ë° ë¦°íŠ¸ ê²€ì‚¬"
    
    # ì‹¤í–‰ í™˜ê²½ ì§€ì •
    runs-on: ubuntu-latest  # ubuntu-latest, windows-latest, macos-latest
    
    # ì‘ì—… ì‹¤í–‰ ì¡°ê±´ (í‘œí˜„ì‹ ì‚¬ìš©)
    if: ${{ !contains(github.event.head_commit.message, '[skip ci]') }}
    
    # ì‘ì—… íƒ€ì„ì•„ì›ƒ (ë¶„ ë‹¨ìœ„)
    timeout-minutes: 15
    
    # ì‘ì—… ë ˆë²¨ í™˜ê²½ ë³€ìˆ˜
    env:
      NODE_VERSION: "20"
      
    # ì‘ì—… ë‹¨ê³„ë“¤
    steps:
      # 7.1.1 ì €ì¥ì†Œ ì²´í¬ì•„ì›ƒ
      - name: "ğŸ“¥ ì†ŒìŠ¤ì½”ë“œ ì²´í¬ì•„ì›ƒ"
        uses: actions/checkout@v4
        with:
          # ì „ì²´ íˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸° (ê¸°ë³¸ê°’: 1)
          fetch-depth: 0
          # íŠ¹ì • í† í° ì‚¬ìš© (ê¸°ë³¸ê°’: GITHUB_TOKEN)
          token: ${{ secrets.GITHUB_TOKEN }}
          # LFS íŒŒì¼ ì²´í¬ì•„ì›ƒ
          lfs: false
      
      # 7.1.2 Node.js í™˜ê²½ ì„¤ì •
      - name: "âš™ï¸ Node.js í™˜ê²½ ì„¤ì •"
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          # íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìºì‹œ í™œì„±í™”
          cache: 'npm'
          # ë ˆì§€ìŠ¤íŠ¸ë¦¬ URL ì„¤ì •
          registry-url: 'https://registry.npmjs.org'
          # .nvmrc íŒŒì¼ì—ì„œ Node ë²„ì „ ì½ê¸°
          node-version-file: '.nvmrc'
      
      # 7.1.3 ì˜ì¡´ì„± ìºì‹±
      - name: "ğŸ“¦ ì˜ì¡´ì„± ìºì‹œ ì„¤ì •"
        uses: actions/cache@v3
        with:
          path: |
            ~/.npm
            node_modules
          # ìºì‹œ í‚¤ ìƒì„± (package-lock.json í•´ì‹œ ê¸°ë°˜)
          key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
          # ìºì‹œ ë³µì› í‚¤ (ë¶€ë¶„ ë§¤ì¹˜ í—ˆìš©)
          restore-keys: |
            ${{ runner.os }}-node-
      
      # 7.1.4 ì˜ì¡´ì„± ì„¤ì¹˜
      - name: "ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜"
        run: |
          # npm ciëŠ” package-lock.jsonì„ ê¸°ë°˜ìœ¼ë¡œ ì •í™•í•œ ë²„ì „ ì„¤ì¹˜
          npm ci --prefer-offline --no-audit
        env:
          # ë‹¨ê³„ë³„ í™˜ê²½ ë³€ìˆ˜
          NPM_CONFIG_LOGLEVEL: warn
      
      # 7.1.5 TypeScript íƒ€ì… ê²€ì‚¬
      - name: "ğŸ” TypeScript íƒ€ì… ê²€ì‚¬"
        run: npx tsc --noEmit
        # ê³„ì† ì‹¤í–‰ (ì˜¤ë¥˜ê°€ ìˆì–´ë„ ë‹¤ìŒ ë‹¨ê³„ ì‹¤í–‰)
        continue-on-error: false
      
      # 7.1.6 ESLint ê²€ì‚¬
      - name: "ğŸ§¹ ESLint ì½”ë“œ ë¦°íŠ¸ ê²€ì‚¬"
        run: |
          # ESLint ì‹¤í–‰ ë° ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥
          npm run lint -- --format=json --output-file=eslint-report.json
          # ê²½ê³  í¬í•¨ ê°œìˆ˜ í™•ì¸
          npm run lint -- --max-warnings 0
        # ì‹¤íŒ¨í•´ë„ ê³„ì† ì§„í–‰
        continue-on-error: true
      
      # 7.1.7 Prettier í¬ë§· ê²€ì‚¬
      - name: "ğŸ’… Prettier í¬ë§· ê²€ì‚¬"
        run: npm run format:check
      
      # 7.1.8 ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬
      - name: "ğŸ”’ ë³´ì•ˆ ì·¨ì•½ì  ê²€ì‚¬"
        run: |
          # npm audit ì‹¤í–‰
          npm audit --audit-level=high
          # ê²°ê³¼ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥
          npm audit --json > audit-results.json
        continue-on-error: true
      
      # 7.1.9 ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ (ë¦°íŠ¸ ê²°ê³¼)
      - name: "ğŸ“„ ë¦°íŠ¸ ê²°ê³¼ ì—…ë¡œë“œ"
        uses: actions/upload-artifact@v3
        if: always()  # í•­ìƒ ì‹¤í–‰ (ì„±ê³µ/ì‹¤íŒ¨ ê´€ê³„ì—†ì´)
        with:
          name: lint-results
          path: |
            eslint-report.json
            audit-results.json
          # ë³´ì¡´ ê¸°ê°„ (ì¼ ë‹¨ìœ„)
          retention-days: 7

  # ===========================================================================
  # 7.2 ë§¤íŠ¸ë¦­ìŠ¤ ì „ëµì„ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸ ì‘ì—…  
  # ===========================================================================
  
  test:
    name: "í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (Node ${{ matrix.node }}, ${{ matrix.os }})"
    
    # ì´ì „ ì‘ì—…ì— ì˜ì¡´
    needs: [code-quality]
    
    # ë§¤íŠ¸ë¦­ìŠ¤ ì „ëµ ì„¤ì •
    strategy:
      # í•˜ë‚˜ì˜ ë§¤íŠ¸ë¦­ìŠ¤ê°€ ì‹¤íŒ¨í•´ë„ ë‹¤ë¥¸ ë§¤íŠ¸ë¦­ìŠ¤ëŠ” ê³„ì† ì‹¤í–‰
      fail-fast: false
      # ìµœëŒ€ ë³‘ë ¬ ì‹¤í–‰ ìˆ˜
      max-parallel: 4
      # ë§¤íŠ¸ë¦­ìŠ¤ ë³€ìˆ˜ ì •ì˜
      matrix:
        # ìš´ì˜ì²´ì œ ë§¤íŠ¸ë¦­ìŠ¤
        os: [ubuntu-latest, windows-latest, macos-latest]
        # Node.js ë²„ì „ ë§¤íŠ¸ë¦­ìŠ¤  
        node: ['18', '20', '21']
        # ë§¤íŠ¸ë¦­ìŠ¤ ì¡°í•© ì¶”ê°€
        include:
          # ì‹¤í—˜ì  ì„¤ì • ì¶”ê°€
          - os: ubuntu-latest
            node: '22'
            experimental: true
        # ë§¤íŠ¸ë¦­ìŠ¤ ì¡°í•© ì œì™¸
        exclude:
          # Windowsì—ì„œ Node 21 ì œì™¸
          - os: windows-latest
            node: '21'
    
    # ë§¤íŠ¸ë¦­ìŠ¤ OSì—ì„œ ì‹¤í–‰
    runs-on: ${{ matrix.os }}
    
    # ì‹¤í—˜ì  ë¹Œë“œëŠ” ì‹¤íŒ¨í•´ë„ ì „ì²´ ì‹¤íŒ¨ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
    continue-on-error: ${{ matrix.experimental == true }}
    
    steps:
      - name: "ğŸ“¥ ì²´í¬ì•„ì›ƒ"
        uses: actions/checkout@v4
      
      - name: "âš™ï¸ Node.js ${{ matrix.node }} ì„¤ì •"
        uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node }}
          cache: 'npm'
      
      - name: "ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜"
        run: npm ci
      
      # ì¡°ê±´ë¶€ ë‹¨ê³„ ì‹¤í–‰
      - name: "ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰"
        if: ${{ !inputs.skip_tests }}
        run: |
          # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ì»¤ë²„ë¦¬ì§€ ìƒì„±
          npm test -- --coverage --watchAll=false
        env:
          # í…ŒìŠ¤íŠ¸ í™˜ê²½ ë³€ìˆ˜
          NODE_ENV: test
          CI: true
      
      - name: "ğŸ“Š í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì—…ë¡œë“œ"
        uses: codecov/codecov-action@v3
        if: matrix.os == 'ubuntu-latest' && matrix.node == '20'
        with:
          files: ./coverage/lcov.info
          flags: unittests
          name: codecov-umbrella

  # ===========================================================================
  # 7.3 ë¹Œë“œ ì‘ì—… (ì—¬ëŸ¬ ì¶œë ¥ê³¼ ì•„í‹°íŒ©íŠ¸ ì²˜ë¦¬)
  # ===========================================================================
  
  build:
    name: "ë¹Œë“œ ë° ì•„í‹°íŒ©íŠ¸ ìƒì„±"
    needs: [test]
    runs-on: ubuntu-latest
    
    # ì‘ì—… ì¶œë ¥ ì •ì˜ (ë‹¤ë¥¸ ì‘ì—…ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)
    outputs:
      # ì¶œë ¥ ë³€ìˆ˜ ì •ì˜
      build-version: ${{ steps.version.outputs.version }}
      build-time: ${{ steps.build-info.outputs.time }}
      artifact-url: ${{ steps.upload.outputs.artifact-url }}
    
    steps:
      - uses: actions/checkout@v4
      
      - name: "âš™ï¸ Node.js ì„¤ì •"
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      
      - run: npm ci
      
      # ë²„ì „ ì •ë³´ ìƒì„±
      - name: "ğŸ“‹ ë²„ì „ ì •ë³´ ìƒì„±"
        id: version
        run: |
          # ë²„ì „ ë¬¸ìì—´ ìƒì„±
          VERSION="1.0.${{ github.run_number }}"
          echo "version=${VERSION}" >> $GITHUB_OUTPUT
          echo "Generated version: ${VERSION}"
      
      # ë¹Œë“œ ì •ë³´ ì„¤ì •
      - name: "â„¹ï¸ ë¹Œë“œ ì •ë³´ ì„¤ì •"
        id: build-info
        run: |
          # ë¹Œë“œ ì‹œê°„ ì„¤ì •
          BUILD_TIME=$(date -u +"%Y-%m-%dT%H:%M:%SZ")
          echo "time=${BUILD_TIME}" >> $GITHUB_OUTPUT
          
          # í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì— ì¶”ê°€
          echo "BUILD_VERSION=${{ steps.version.outputs.version }}" >> $GITHUB_ENV
          echo "BUILD_TIME=${BUILD_TIME}" >> $GITHUB_ENV
      
      # Next.js ë¹Œë“œ
      - name: "ğŸ—ï¸ Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ"
        run: |
          # ë¹Œë“œ í™˜ê²½ ì„¤ì •
          echo "Building Next.js application..."
          echo "Version: $BUILD_VERSION"
          echo "Time: $BUILD_TIME"
          
          # Next.js ë¹Œë“œ ì‹¤í–‰
          npm run build
        env:
          # ë¹Œë“œ í™˜ê²½ ë³€ìˆ˜
          NODE_ENV: production
          NEXT_TELEMETRY_DISABLED: 1
          # Secrets ì‚¬ìš©
          NEXT_PUBLIC_API_URL: ${{ secrets.API_URL }}
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
      
      # ë¹Œë“œ ê²°ê³¼ ê²€ì¦
      - name: "âœ… ë¹Œë“œ ê²°ê³¼ ê²€ì¦"
        run: |
          # ë¹Œë“œ í´ë” ì¡´ì¬ í™•ì¸
          if [ ! -d ".next" ]; then
            echo "âŒ Build failed: .next directory not found"
            exit 1
          fi
          
          # ë¹Œë“œ íŒŒì¼ í¬ê¸° í™•ì¸
          BUILD_SIZE=$(du -sh .next | cut -f1)
          echo "ğŸ“Š Build size: $BUILD_SIZE"
          
          # ë¹Œë“œ ì •ë³´ë¥¼ íŒŒì¼ë¡œ ì €ì¥
          cat > build-info.json << EOF
          {
            "version": "$BUILD_VERSION",
            "buildTime": "$BUILD_TIME",
            "size": "$BUILD_SIZE",
            "commit": "${{ github.sha }}",
            "branch": "${{ github.ref_name }}"
          }
          EOF
      
      # ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ
      - name: "ğŸ“¦ ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ì—…ë¡œë“œ"
        id: upload
        uses: actions/upload-artifact@v3
        with:
          name: next-build-${{ steps.version.outputs.version }}
          path: |
            .next/
            public/
            build-info.json
            package.json
          retention-days: 30
      
      # GitHub Pagesìš© ì •ì  íŒŒì¼ ìƒì„± (ì¡°ê±´ë¶€)
      - name: "ğŸ“„ GitHub Pages ì•„í‹°íŒ©íŠ¸ ìƒì„±"
        if: github.ref == 'refs/heads/main'
        uses: actions/upload-pages-artifact@v2
        with:
          path: ./out

  # ===========================================================================
  # 7.4 ë³´ì•ˆ ê²€ì‚¬ ì‘ì—…
  # ===========================================================================
  
  security:
    name: "ë³´ì•ˆ ê²€ì‚¬"
    runs-on: ubuntu-latest
    # ë³‘ë ¬ ì‹¤í–‰ (ë‹¤ë¥¸ ì‘ì—…ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ)
    
    # ê¶Œí•œ ì„¤ì • (ì‘ì—…ë³„)
    permissions:
      security-events: write
      actions: read
      contents: read
    
    steps:
      - uses: actions/checkout@v4
      
      # CodeQL ë¶„ì„ ì´ˆê¸°í™”
      - name: "ğŸ” CodeQL ë¶„ì„ ì´ˆê¸°í™”"
        uses: github/codeql-action/init@v2
        with:
          languages: javascript
          # ì¶”ê°€ ì¿¼ë¦¬ ì‚¬ìš©
          queries: security-extended
      
      # ì¢…ì†ì„± ë³´ì•ˆ ê²€ì‚¬
      - name: "ğŸ”’ ì¢…ì†ì„± ë³´ì•ˆ ê²€ì‚¬"
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high --json-file-output=snyk-results.json
        continue-on-error: true
      
      # CodeQL ë¶„ì„ ìˆ˜í–‰
      - name: "ğŸ“Š CodeQL ë¶„ì„ ìˆ˜í–‰"
        uses: github/codeql-action/analyze@v2

  # ===========================================================================
  # 7.5 ì¡°ê±´ë¶€ ë°°í¬ ì‘ì—… (í™˜ê²½ë³„)
  # ===========================================================================
  
  deploy:
    name: "ë°°í¬ (${{ github.event.inputs.environment || 'staging' }})"
    needs: [build, security]
    runs-on: ubuntu-latest
    
    # ë°°í¬ í™˜ê²½ ì„¤ì •
    environment:
      name: ${{ github.event.inputs.environment || 'staging' }}
      # ë°°í¬ URL (ë™ì  ì„¤ì •)
      url: ${{ steps.deploy.outputs.url }}
    
    # ë©”ì¸ ë¸Œëœì¹˜ ë˜ëŠ” ìˆ˜ë™ ì‹¤í–‰ì—ì„œë§Œ ë°°í¬
    if: ${{ github.ref == 'refs/heads/main' || github.event_name == 'workflow_dispatch' }}
    
    steps:
      - uses: actions/checkout@v4
      
      # í™˜ê²½ë³„ ì„¤ì • ë¡œë“œ
      - name: "âš™ï¸ í™˜ê²½ ì„¤ì •"
        id: config
        run: |
          ENV="${{ github.event.inputs.environment || 'staging' }}"
          
          case $ENV in
            "production")
              echo "domain=app.example.com" >> $GITHUB_OUTPUT
              echo "api_url=https://api.example.com" >> $GITHUB_OUTPUT
              echo "deploy_path=/var/www/production" >> $GITHUB_OUTPUT
              ;;
            "staging")
              echo "domain=staging.example.com" >> $GITHUB_OUTPUT
              echo "api_url=https://staging-api.example.com" >> $GITHUB_OUTPUT
              echo "deploy_path=/var/www/staging" >> $GITHUB_OUTPUT
              ;;
            *)
              echo "domain=dev.example.com" >> $GITHUB_OUTPUT
              echo "api_url=https://dev-api.example.com" >> $GITHUB_OUTPUT
              echo "deploy_path=/var/www/development" >> $GITHUB_OUTPUT
              ;;
          esac
      
      # ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ë‹¤ìš´ë¡œë“œ
      - name: "ğŸ“¦ ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ë‹¤ìš´ë¡œë“œ"
        uses: actions/download-artifact@v3
        with:
          name: next-build-${{ needs.build.outputs.build-version }}
          path: ./build
      
      # ë°°í¬ ì‹¤í–‰
      - name: "ğŸš€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬"
        id: deploy
        run: |
          ENV="${{ github.event.inputs.environment || 'staging' }}"
          DOMAIN="${{ steps.config.outputs.domain }}"
          
          echo "ğŸš€ Deploying to $ENV environment..."
          echo "ğŸŒ Domain: $DOMAIN"
          
          # ë°°í¬ ë¡œì§ (ì˜ˆ: rsync, scp, API í˜¸ì¶œ ë“±)
          # ì‹¤ì œ ë°°í¬ ëª…ë ¹ì–´ë“¤...
          
          # ë°°í¬ URL ì¶œë ¥
          echo "url=https://$DOMAIN" >> $GITHUB_OUTPUT
        env:
          # ë°°í¬ì— í•„ìš”í•œ ì‹œí¬ë¦¿ë“¤
          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
          SERVER_HOST: ${{ secrets.SERVER_HOST }}
          SERVER_USER: ${{ secrets.SERVER_USER }}
      
      # ë°°í¬ ìƒíƒœ ì•Œë¦¼
      - name: "ğŸ“¢ ë°°í¬ ì™„ë£Œ ì•Œë¦¼"
        if: always()
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          fields: repo,message,commit,author,action,eventName,ref,workflow
          text: |
            ë°°í¬ ${{ job.status }}!
            ğŸŒ í™˜ê²½: ${{ github.event.inputs.environment || 'staging' }}
            ğŸ”— URL: ${{ steps.deploy.outputs.url }}
            ğŸ’¬ ë©”ì‹œì§€: ${{ github.event.inputs.custom_message || github.event.head_commit.message }}
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}

  # ===========================================================================
  # 7.6 ì •ë¦¬ ì‘ì—… (Cleanup Job)
  # ===========================================================================
  
  cleanup:
    name: "ì •ë¦¬ ì‘ì—…"
    runs-on: ubuntu-latest
    # ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)
    needs: [deploy]
    if: always()
    
    steps:
      # ì´ì „ ì•„í‹°íŒ©íŠ¸ ì •ë¦¬
      - name: "ğŸ§¹ ì´ì „ ì•„í‹°íŒ©íŠ¸ ì •ë¦¬"
        uses: actions/github-script@v6
        with:
          script: |
            // 30ì¼ ì´ìƒëœ ì•„í‹°íŒ©íŠ¸ ì‚­ì œ
            const artifacts = await github.rest.actions.listArtifactsForRepo({
              owner: context.repo.owner,
              repo: context.repo.repo,
            });
            
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            for (const artifact of artifacts.data.artifacts) {
              if (new Date(artifact.created_at) < thirtyDaysAgo) {
                await github.rest.actions.deleteArtifact({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  artifact_id: artifact.id,
                });
                console.log(`Deleted artifact: ${artifact.name}`);
              }
            }

# ==============================================================================
# ì¶”ê°€ ê³ ê¸‰ ë¬¸ë²• ì˜ˆì œë“¤
# ==============================================================================

# ë‹¤ë¥¸ ì›Œí¬í”Œë¡œìš° íŒŒì¼ì—ì„œ ì´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ë²•:
# 
# jobs:
#   call-reusable-workflow:
#     uses: ./.github/workflows/this-file.yml
#     with:
#       node_version: '18'
#     secrets:
#       NPM_TOKEN: ${{ secrets.NPM_TOKEN }}

# í‘œí˜„ì‹ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í•¨ìˆ˜ë“¤:
# - contains(search, item): í¬í•¨ ì—¬ë¶€ í™•ì¸
# - startsWith(searchString, searchValue): ì‹œì‘ ë¬¸ìì—´ í™•ì¸  
# - endsWith(searchString, searchValue): ë ë¬¸ìì—´ í™•ì¸
# - format(string, replaceValue0, replaceValue1, ...): ë¬¸ìì—´ í¬ë§·íŒ…
# - join(array, separator): ë°°ì—´ ì¡°ì¸
# - toJSON(value): JSON ë¬¸ìì—´ë¡œ ë³€í™˜
# - fromJSON(value): JSON íŒŒì‹±
# - hashFiles(path): íŒŒì¼ í•´ì‹œ ìƒì„±
# - success(): ì´ì „ ë‹¨ê³„ë“¤ì´ ëª¨ë‘ ì„±ê³µ
# - always(): í•­ìƒ ì‹¤í–‰
# - cancelled(): ì·¨ì†Œë¨
# - failure(): ì‹¤íŒ¨í•¨

# ì»¨í…ìŠ¤íŠ¸ ë³€ìˆ˜ë“¤:
# - github.*: GitHub ì´ë²¤íŠ¸ ë° ì €ì¥ì†Œ ì •ë³´
# - env.*: í™˜ê²½ ë³€ìˆ˜
# - job.*: í˜„ì¬ ì‘ì—… ì •ë³´  
# - steps.*: ì´ì „ ë‹¨ê³„ ì¶œë ¥
# - runner.*: ëŸ¬ë„ˆ ì •ë³´
# - secrets.*: ì €ì¥ì†Œ ì‹œí¬ë¦¿
# - vars.*: ì €ì¥ì†Œ ë³€ìˆ˜
# - inputs.*: ì›Œí¬í”Œë¡œìš° ì…ë ¥
# - matrix.*: ë§¤íŠ¸ë¦­ìŠ¤ ê°’

```

## References
[[1-ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/GitHub Actions ì™„ì „ í•¸ë“œë¶_ ì´ˆë³´ìë¶€í„° ì¤‘ê¸‰ìê¹Œì§€]]
[[1-ğŸ“š ì°¸ê³  ë…¸íŠ¸/ai ë‹µë³€/GitHub Actions ë¬¸ë²•ê³¼ Next.js ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€ í•¸ë“œë¶]]
 [[5-ğŸ’ ì˜êµ¬ ë…¸íŠ¸/CI CD]]
 [[5-ğŸ’ ì˜êµ¬ ë…¸íŠ¸/ê¹ƒ]]
 [[5-ğŸ’ ì˜êµ¬ ë…¸íŠ¸/ì  í‚¨ìŠ¤]]